# Copyright (C) 2018-2024 Intel Corporation
# SPDX-License-Identifier: Apache-2.0
#
cmake_minimum_required(VERSION 3.12)

set(TARGET_NAME "mirage")

# set (CMAKE_C_STANDARD 11)
# set (CMAKE_CXX_STANDARD 17)
# set (CMAKE_CXX_STANDARD_REQUIRED ON)


# file(GLOB_RECURSE SOURCES "*.cpp" "*.hpp" "*.h")
file(GLOB_RECURSE SOURCES "*.cc" "*.cpp")
file(GLOB_RECURSE HEADERS "*.h" "*.hpp")

# find_package(PkgConfig REQUIRED)
# pkg_check_modules(LIBAV REQUIRED IMPORTED_TARGET
#     libavformat
#     libavcodec
#     libswscale
#     libavutil
# )

# # Ensures both OpenVINO and the Runtime component are required
# find_package(OpenVINO REQUIRED COMPONENTS Runtime)

# Only the Runtime component is required, OpenVINO package is optional
find_package(OpenVINO COMPONENTS Runtime REQUIRED)

find_package(OpenCV REQUIRED)
find_package(Threads REQUIRED)
find_package(gflags REQUIRED)
find_package(Boost REQUIRED)
find_package(TBB REQUIRED tbb)
# find_package(glog 0.4.0 REQUIRED)

add_executable(${TARGET_NAME} ${SOURCES} ${HEADERS})

target_include_directories(${TARGET_NAME} 
PRIVATE 
    ${OpenCV_INCLUDE_DIRS} 
    ${TBB_INCLUDE_DIRS}
    # ${LIBAV_INCLUDE_DIRS}
)
# target_link_directories(${TARGET_NAME} PRIVATE ${LIBAV_LIBRARY_DIRS})
target_link_libraries(${TARGET_NAME}
PRIVATE
    openvino::runtime
    # PkgConfig::LIBAV
    TBB::tbb 
    ${OpenCV_LIBS}
    # boost_system
    # boost_thread
    gflags
    Threads::Threads
)
